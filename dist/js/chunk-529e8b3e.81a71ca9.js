(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-529e8b3e"],{"0e14":function(e,t,i){"use strict";var n=i("3abc"),s=i.n(n);s.a},"20f0":function(e,t,i){"use strict";var n=i("bc2e"),s=i.n(n);s.a},"33a8":function(e,t,i){"use strict";var n=i("f6d3"),s=i.n(n);s.a},"3abc":function(e,t,i){},"3b26":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"competition"},[e.isLoading?i("Loader"):i("div",{ref:"title",staticClass:"title"},[i("h3",[e._v(e._s(e.competition.title))]),e._l(e.errors,(function(t){return i("Alert",{key:t,attrs:{type:"danger"}},[e._v(e._s(t))])})),e._l(e.successes,(function(t){return i("Alert",{key:t,attrs:{type:"success"}},[e._v(e._s(t))])})),e.isLoading||e.stickyTitle?e._e():i("div",{staticClass:"row info"},[i("div",{staticClass:"col s12 l4"},[i("b",[e._v("Start time")]),e._v("\n        : "+e._s(e.competition.start_time)+"\n      ")]),i("div",{staticClass:"col s12 l4"},[i("b",[e._v("Finish time")]),e._v("\n        : "+e._s(e.competition.finish_time)+"\n      ")]),i("div",{staticClass:"col s12 l4"},[i("b",[e._v("Duration")]),e._v("\n        : "+e._s(e.competition.duration)+"\n      ")])]),e.isLoading||e.stickyTitle?e._e():i("div",{staticClass:"row description"},[i("div",{staticClass:"col s12"},[i("p",[e._v(e._s(e.competition.description))])])]),e.isLoading?e._e():i("div",{staticClass:"times"},[i("h5",[e._v("Total: "+e._s(e.test.questions.length))]),i("h5",[e._v("Time: "+e._s(e.displayTime))])])],2),!e.isLoading&&e.test.questions.length>0?i("Test",{attrs:{questions:e.test.questions,enableDeleteQuestion:e.enableDeleteQuestion,enableEdit:e.enableEditTest,enableCheck:!e.timer.timeIsOff,checkOption:e.submit}}):e._e(),e.isLoading?e._e():i("div",{staticClass:"complete-button"},[i("button",{staticClass:"btn btn-large",attrs:{id:"CompleteBtn"},on:{click:e.completeBtnHandler}},[e._v("Complete")])])],1)},s=[],a=(i("20d6"),i("ac6a"),i("96cf"),i("3b8d")),r=i("864c"),o=i("98ab"),c=(i("644d"),i("555f")),l=i("124d"),u={name:"Competition",components:{Test:r["a"],Alert:o["a"],Loader:c["a"]},data:function(){return{competition:{id:0,title:"",description:"",created:"",start_time:"",finish_time:"",duration:""},test:{questions:[]},errors:[],successes:[],isLoading:!1,stickyTitle:!1,timer:{timeLeft:0,timeIsOff:!1,intervalTimer:null,stopTime:null}}},computed:{enableDeleteQuestion:function(){return!1},enableEditTest:function(){return!1},displayTime:function(){var e=parseInt(this.timer.timeLeft/3600),t=parseInt(this.timer.timeLeft%3600/60),i=this.timer.timeLeft%3600%60;return"".concat(e<0?"-":"").concat(Math.abs(e)<10?"0":"").concat(Math.abs(e),":").concat(t<0?"-":"").concat(Math.abs(t)<10?"0":"").concat(Math.abs(t),":").concat(i<0?"-":"").concat(Math.abs(i)<10?"0":"").concat(Math.abs(i))}},methods:{getById:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.clearAlerts(),this.isLoading=!0,e.next=4,this.$store.dispatch("publics/getByIdWithTest",t);case 4:if(i=e.sent,!(i.errors.length<1)){e.next=12;break}return e.next=8,this.start(t,i.entity.finish_time,i.entity.duration);case 8:i.errors=e.sent,i.errors.length<1?(this.competition.id=i.entity.id,this.competition.title=i.entity.title,this.competition.description=i.entity.description,this.competition.created=i.entity.created,this.competition.start_time=i.entity.start_time,this.competition.finish_time=i.entity.finish_time,this.competition.duration=i.entity.duration,i.entity.test&&(this.test=i.entity.test)):i.errors.forEach((function(e){n.errors.push(e.message)})),e.next=13;break;case 12:i.errors.forEach((function(e){n.errors.push(e.message)}));case 13:this.isLoading=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),start:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i,n){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s={errors:[]},a=localStorage.getItem("stopTime"),r=localStorage.getItem("id"),r&&(r=window.atob(r)),r!=t||!a){e.next=9;break}this.timer.stopTime=window.atob(a),this.timer.timeLeft=Math.round((this.timer.stopTime-Date.now())/1e3),e.next=13;break;case 9:return e.next=11,this.$store.dispatch("publics/start",t);case 11:s=e.sent,s.errors.length<1&&(this.timer.stopTime=this.countStopTime(i,n),localStorage.setItem("stopTime",window.btoa(this.timer.stopTime)),localStorage.setItem("id",window.btoa(t)),this.timer.timeLeft=Math.round((this.timer.stopTime-Date.now())/1e3));case 13:return e.abrupt("return",s.errors);case 14:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}(),completeBtnHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.clearAlerts(),this.isLoading=!0,e.next=4,this.$store.dispatch("publics/finish",this.competition.id);case 4:t=e.sent,this.isLoading=!1,t.errors.length>0?t.errors.forEach((function(e){i.errors.push(e.message)})):t.errors.length<1&&(clearInterval(this.timer.intervalTimer),localStorage.removeItem("id"),localStorage.removeItem("stopTime"),this.$router.push("/competitions/".concat(this.competition.id,"/results")));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clearAlerts:function(){this.errors=[],this.successes=[]},handleScroll:function(e){if(!this.isLoading){var t=this.$refs["title"],i=t.offsetTop-50;window.pageYOffset>i&&window.pageYOffset>50?(this.stickyTitle=!0,t.classList.add("sticky"),t.classList.add("container")):(this.stickyTitle=!1,t.classList.remove("sticky"),t.classList.remove("container"))}},startTimer:function(){var e=this;!this.timer.timeIsOff&&this.timer.timeLeft>0?this.timer.intervalTimer=setInterval((function(){e.timer.timeLeft=Math.round((e.timer.stopTime-Date.now())/1e3),e.timer.timeLeft<1&&(e.timer.timeIsOff=!0,clearInterval(e.timer.intervalTimer))}),1e3):this.timer.timeIsOff=!0},countStopTime:function(e,t){var i=new Date(e)-Date.now(),n=1e3*Object(l["a"])(t);return Math.min(Math.max(i,0),n)+Date.now()},submit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,i,n){var s,a,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s={errors:[]},a=-1,r=this.test.questions.findIndex((function(e){return e.id==t})),r>=0&&(a=this.test.questions[r].answers.findIndex((function(e){return e.id==i}))),!n){e.next=11;break}return e.next=7,this.$store.dispatch("publics/deleteSubmit",{id:this.competition.id,answer:n});case 7:s=e.sent,a>=0&&(this.test.questions[r].answers[a].submit=null),e.next=15;break;case 11:return e.next=13,this.$store.dispatch("publics/submit",{id:this.competition.id,question:t,answer:i});case 13:s=e.sent,a>=0&&(this.test.questions[r].answers[a].submit=s.entity.id);case 15:s.errors.forEach((function(e){o.errors.push(e.message)}));case 16:case"end":return e.stop()}}),e,this)})));function t(t,i,n){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getById(this.$route.params.id);case 2:this.startTimer();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},d=u,h=(i("20f0"),i("2877")),p=Object(h["a"])(d,n,s,!1,null,null,null);t["default"]=p.exports},"3bf0":function(e,t,i){"use strict";var n=i("a25d"),s=i.n(n);s.a},"5dbc":function(e,t,i){var n=i("d3f4"),s=i("8b97").set;e.exports=function(e,t,i){var a,r=t.constructor;return r!==i&&"function"==typeof r&&(a=r.prototype)!==i.prototype&&n(a)&&s&&s(e,a),e}},"864c":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"test"},[e._l(e.questions,(function(t,n){return i("Question",{key:n,attrs:{value:t,index:n,enableDelete:e.enableDeleteQuestion,enableEdit:e.enableEdit,enableCheck:e.enableCheck},on:{deleteQuestion:e.deleteQuestion,addOption:e.addOption,deleteOption:e.deleteOption,checkOption:e.checkOption}})})),e.enableEdit?i("div",{staticClass:"add-question-button"},[i("div",{staticClass:"btn-floating btn-meduim",on:{click:e.addQuestion}},[i("i",{staticClass:"material-icons"},[e._v("add")])])]):e._e()],2)},s=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row question"},[i("div",{staticClass:"col card s12"},[i("div",{staticClass:"card-content"},[i("div",{staticClass:"card-title"},[i("span",[e._v("Question "+e._s(e.index+1))]),e.enableEdit?i("i",{staticClass:"material-icons small",class:{"blue-grey-text text-lighten-3":!e.enableDelete},on:{click:e.deleteQuestion}},[e._v("\n                    close\n                ")]):e._e()]),i("div",{staticClass:"s12"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value.text,expression:"value.text"}],staticClass:"materialize-textarea",attrs:{id:"questionText",placeholder:"question",disabled:!e.enableEdit,maxlength:"200"},domProps:{value:e.value.text},on:{change:e.inputOnChangeListener,input:function(t){t.target.composing||e.$set(e.value,"text",t.target.value)}}})])]),i("div",{staticClass:"card-action"},[i("div",{staticClass:"answers"},e._l(e.value.answers,(function(t,n){return i("Answer",{key:n,attrs:{value:t,index:n,enableDelete:e.enableDeleteAnswer,enableEdit:e.enableEdit,enableCheck:e.enableCheck},on:{deleteAnswer:e.deleteOption,checkAnswer:e.checkOption}})})),1),e.enableEdit?i("div",{staticClass:"add-answer-button"},[i("div",{staticClass:"btn-floating btn-small",on:{click:e.addOption}},[i("i",{staticClass:"material-icons"},[e._v("add")])])]):e._e()])])])},r=[],o=(i("c5f6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"answer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value.text,expression:"value.text"}],attrs:{placeholder:"option",type:"text",disabled:!e.enableEdit,maxlength:"50"},domProps:{value:e.value.text},on:{change:e.inputOnChangeListener,input:function(t){t.target.composing||e.$set(e.value,"text",t.target.value)}}}),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value.correct,expression:"value.correct"}],attrs:{type:"checkbox",disabled:!e.enableCheck},domProps:{checked:Array.isArray(e.value.correct)?e._i(e.value.correct,null)>-1:e.value.correct},on:{change:[function(t){var i=e.value.correct,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);n.checked?r<0&&e.$set(e.value,"correct",i.concat([a])):r>-1&&e.$set(e.value,"correct",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.value,"correct",s)},e.inputOnChangeListener]}}),i("span")]),e.enableEdit?i("i",{staticClass:"material-icons",class:{"blue-grey-text text-lighten-3":!e.enableDelete},on:{click:e.deleteAnswer}},[e._v("\n        delete\n    ")]):e._e()])}),c=[],l=i("dc08"),u={name:"answer",props:{value:{type:Object,required:!0},index:Number,enableDelete:{type:Boolean,default:!1},enableEdit:{type:Boolean,default:!1},enableCheck:{type:Boolean,default:!0}},methods:{deleteAnswer:function(){this.enableDelete&&!this.disable&&this.$emit("deleteAnswer",this.index)},inputOnChangeListener:function(){this.value.action!=l["a"].CREATE&&(this.value.action=l["a"].UPDATE),this.$emit("checkAnswer",this.value.id,this.value.submit)}}},d=u,h=(i("0e14"),i("2877")),p=Object(h["a"])(d,o,c,!1,null,"5aec53f7",null),f=p.exports,m={name:"question",components:{Answer:f},props:{value:{type:Object,required:!0},index:Number,enableDelete:{type:Boolean,default:!1},enableEdit:{type:Boolean,default:!1},enableCheck:{type:Boolean,default:!0}},methods:{addOption:function(){this.$emit("addOption",this.index)},deleteQuestion:function(){this.enableDelete&&!this.disable&&this.$emit("deleteQuestion",this.index)},deleteOption:function(e){this.$emit("deleteOption",this.index,e)},inputOnChangeListener:function(){this.value.action!=l["a"].CREATE&&(this.value.action=l["a"].UPDATE)},checkOption:function(e,t){this.$emit("checkOption",this.value.id,e,t)}},computed:{enableDeleteAnswer:function(){return this.value.answers.length>2}}},v=m,b=(i("33a8"),Object(h["a"])(v,a,r,!1,null,null,null)),g=b.exports,_={name:"test",components:{Question:g},props:{questions:{type:Array,required:!0},enableDeleteQuestion:{type:Boolean,default:!1},enableEdit:{type:Boolean,default:!1},addQuestion:{type:Function,default:function(){}},deleteQuestion:{type:Function,default:function(){}},addOption:{type:Function,default:function(){}},deleteOption:{type:Function,default:function(){}},enableCheck:{type:Boolean,default:!0},checkOption:{type:Function,default:function(){}}}},y=_,w=(i("3bf0"),Object(h["a"])(y,n,s,!1,null,null,null));t["a"]=w.exports},"8b97":function(e,t,i){var n=i("d3f4"),s=i("cb7c"),a=function(e,t){if(s(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(s){t=!0}return function(e,i){return a(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:a}},a25d:function(e,t,i){},aa77:function(e,t,i){var n=i("5ca1"),s=i("be13"),a=i("79e5"),r=i("fdef"),o="["+r+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(e,t,i){var s={},o=a((function(){return!!r[e]()||c[e]()!=c})),l=s[e]=o?t(h):r[e];i&&(s[i]=l),n(n.P+n.F*o,"String",s)},h=d.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},bc2e:function(e,t,i){},c5f6:function(e,t,i){"use strict";var n=i("7726"),s=i("69a8"),a=i("2d95"),r=i("5dbc"),o=i("6a99"),c=i("79e5"),l=i("9093").f,u=i("11e9").f,d=i("86cc").f,h=i("aa77").trim,p="Number",f=n[p],m=f,v=f.prototype,b=a(i("2aeb")(v))==p,g="trim"in String.prototype,_=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():h(t,3);var i,n,s,a=t.charCodeAt(0);if(43===a||45===a){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+t}for(var r,c=t.slice(2),l=0,u=c.length;l<u;l++)if(r=c.charCodeAt(l),r<48||r>s)return NaN;return parseInt(c,n)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof f&&(b?c((function(){v.valueOf.call(i)})):a(i)!=p)?r(new m(_(t)),i,f):_(t)};for(var y,w=i("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)s(m,y=w[x])&&!s(f,y)&&d(f,y,u(m,y));f.prototype=v,v.constructor=f,i("2aba")(n,p,f)}},f6d3:function(e,t,i){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-529e8b3e.81a71ca9.js.map